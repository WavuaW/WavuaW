name: 🌌 Wavua's Futuristic Profile Automation

on:
  schedule:
    # Run daily at 9 AM UTC (adjust for your timezone)
    - cron: "0 9 * * *"
  
  workflow_dispatch:
    inputs:
      force_update:
        description: 'Force cosmic update'
        required: false
        default: 'false'
        type: boolean
  
  push:
    branches:
      - main
      - master
    paths:
      - 'README.md'
      - '.github/workflows/**'

jobs:
  generate-snake:
    name: 🐍 Generate Contribution Snake
    runs-on: ubuntu-latest
    timeout-minutes: 10
    
    steps:
      - name: 🌟 Checkout cosmic repository
        uses: actions/checkout@v4
        
      - name: 🐍 Generate contribution snake
        uses: Platane/snk/svg-only@v3
        with:
          github_user_name: WavuaW
          outputs: |
            dist/github-contribution-grid-snake.svg
            dist/github-contribution-grid-snake-dark.svg?palette=github-dark&color_snake=00d4ff&color_dots=#0a0a0a,#1a1a1a,#2a2a2a,#3a3a3a,#00d4ff
            
      - name: 🚀 Deploy to cosmic output branch
        uses: crazy-max/ghaction-github-pages@v3.1.0
        with:
          target_branch: output
          build_dir: dist
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  update-profile:
    name: ✨ Update Futuristic Profile
    runs-on: ubuntu-latest
    
    steps:
      - name: 🌟 Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          
      - name: 🐍 Setup Python cosmos
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
          
      - name: 📦 Install cosmic dependencies
        run: |
          pip install requests python-dateutil
          
      - name: 🎯 Configure git
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "Wavua's Automation Bot"
          
      - name: 🚀 Run futuristic automation
        run: |
          python scripts/wavua_automation.py
          
      - name: 🌌 Push cosmic updates
        run: |
          if [[ -n $(git status --porcelain) ]]; then
            git add .
            git commit -m "🌌 Automated cosmic profile update"
            git push
          else
            echo "🌙 No cosmic changes to commit"
          fi

  blog-post-workflow:
    name: 📝 Update Blog Posts
    runs-on: ubuntu-latest
    if: github.event_name == 'schedule' || github.event.inputs.force_update == 'true'
    
    steps:
      - name: 🌟 Checkout
        uses: actions/checkout@v4
        
      - name: 📰 Pull latest blog posts
        uses: gautamkrishnar/blog-post-workflow@master
        with:
          comment_tag_name: "BLOG"
          feed_list: "https://dev.to/feed/wavuaw"
          max_post_count: 5
          template: "- 🌟 [$title]($url) - $date"
          date_format: "mmm dd, yyyy"

  profile-analytics:
    name: 📊 Generate Profile Analytics
    runs-on: ubuntu-latest
    if: github.event_name == 'schedule'
    
    steps:
      - name: 🌟 Checkout
        uses: actions/checkout@v4
        
      - name: 📈 Generate profile summary
        run: |
          echo "# 📊 Wavua's Cosmic Analytics" > profile_analytics.md
          echo "Generated on: $(date)" >> profile_analytics.md
          echo "" >> profile_analytics.md
          echo "## 🚀 Recent Activity" >> profile_analytics.md
          
          # Get recent commits
          git log --oneline -10 --pretty=format:"- %s (%cr)" >> profile_analytics.md
          
          echo "" >> profile_analytics.md
          echo "## 📈 Repository Stats" >> profile_analytics.md
          echo "- Total commits: $(git rev-list --count HEAD)" >> profile_analytics.md
          echo "- Repository age: $(git log --reverse --format=%cr | head -1)" >> profile_analytics.md
          
      - name: 💾 Commit analytics
        run: |
          if [[ -n $(git status --porcelain) ]]; then
            git config --local user.email "action@github.com"
            git config --local user.name "Analytics Bot"
            git add profile_analytics.md
            git commit -m "📊 Updated cosmic analytics"
            git push
          fi

  weekend-special:
    name: 🎨 Weekend Creative Boost
    runs-on: ubuntu-latest
    if: github.event.schedule == '0 9 * * 6' # Saturday only
    
    steps:
      - name: 🌟 Checkout
        uses: actions/checkout@v4
        
      - name: 🎨 Weekend creative update
        run: |
          echo "🎨 Weekend Creative Session - $(date)" > weekend_inspiration.md
          echo "" >> weekend_inspiration.md
          echo "## 💡 This Week's Creative Focus" >> weekend_inspiration.md
          echo "- Exploring the intersection of art and code" >> weekend_inspiration.md
          echo "- Building tomorrow's digital experiences" >> weekend_inspiration.md
          echo "- Pushing the boundaries of creative technology" >> weekend_inspiration.md
          
      - name: 🚀 Commit weekend vibes
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "Weekend Creative Bot"
          git add weekend_inspiration.md
          git commit -m "🎨 Weekend creative energy boost"
          git push

  profile-health-check:
    name: 🔍 Profile Health Check
    runs-on: ubuntu-latest
    if: github.event_name == 'push'
    
    steps:
      - name: 🌟 Checkout
        uses: actions/checkout@v4
        
      - name: 🔍 Check README health
        run: |
          echo "🔍 Checking profile health..."
          
          # Check if images exist and are accessible
          if grep -q "assests/images" README.md; then
            echo "✅ Profile images referenced in README"
          else
            echo "⚠️ No profile images found in README"
          fi
          
          # Check for broken links (basic check)
          if grep -q "https://" README.md; then
            echo "✅ External links found in README"
          fi
          
          # Check README structure
          if grep -q "## " README.md; then
            echo "✅ README has proper section headers"
          else
            echo "⚠️ README might need better structure"
          fi
          
          # Validate social media links
          if grep -q "twitter.com" README.md; then
            echo "✅ Twitter link found"
          fi
          
          if grep -q "instagram.com" README.md; then
            echo "✅ Instagram link found"
          fi
          
          if grep -q "stackoverflow.com" README.md; then
            echo "✅ Stack Overflow link found"
          fi
          
          echo "🏁 Profile health check complete!"

  notify-completion:
    name: 🎉 Cosmic Mission Complete
    runs-on: ubuntu-latest
    needs: [generate-snake, update-profile]
    if: always()
    
    steps:
      - name: 🌟 Mission status
        run: |
          echo "🌌 Cosmic automation mission complete!"
          echo "🐍 Snake generation: ${{ needs.generate-snake.result }}"
          echo "✨ Profile update: ${{ needs.update-profile.result }}"
          
          if [[ "${{ needs.generate-snake.result }}" == "success" && "${{ needs.update-profile.result }}" == "success" ]]; then
            echo "🎉 All systems optimal! The cosmic profile shines bright!"
          else
            echo "⚠️ Some cosmic disturbances detected. Check the logs!"
          fi